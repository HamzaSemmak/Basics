{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet PanierComponent = class PanierComponent {\n  constructor(basketService) {\n    this.basketService = basketService;\n    this.Total = 0;\n    this.SubTotal = 0;\n    this.DisCountSales = 50;\n    this.TotalSalesTax = 20;\n  }\n  ngOnInit() {\n    this.basketService.getBasket().subscribe(response => {\n      this.Baskets = response;\n      this.Products = Object.values(response);\n      this.Products.forEach(element => {\n        this.SubTotal += element.price;\n      });\n      if (this.SubTotal == 0) {\n        this.Total = 0;\n        return;\n      }\n      this.Total = this.SubTotal - 30;\n    });\n  }\n  increase(Product) {\n    if (Product.quantite >= Product.product.stock) {\n      return;\n    } else {\n      this.SubTotal = this.SubTotal - Product.price;\n      this.Total = this.SubTotal - 30;\n      Product.quantite++;\n      Product.price = Product.product.price * Product.quantite;\n      this.UpdateBasket(Product);\n    }\n    this.SubTotal += Product.price;\n    this.Total = this.SubTotal - 30;\n  }\n  decrease(Product) {\n    if (Product.quantite < 2) {\n      return;\n    } else {\n      this.SubTotal = this.SubTotal - Product.price;\n      this.Total = this.SubTotal - 30;\n      Product.quantite--;\n      Product.price = Product.product.price * Product.quantite;\n      this.UpdateBasket(Product);\n    }\n    this.SubTotal += Product.price;\n    this.Total = this.SubTotal - 30;\n  }\n  ngClearBasket() {\n    this.basketService.clearBasket();\n    this.Baskets = [];\n    this.Total = 0;\n    this.SubTotal = 0;\n  }\n  ngDeleteItemFromBasket(item) {\n    this.basketService.deleteItemFromBasket(item).subscribe(() => {\n      this.Baskets = this.Baskets.filter(t => t.id != item.id);\n    });\n    this.SubTotal -= item.price;\n    if (this.SubTotal == 0) {\n      this.Total = 0;\n      return;\n    }\n    this.Total = this.SubTotal - 30;\n  }\n  UpdateBasket(Basket) {\n    this.basketService.UpdateItemInBaskets(Basket).subscribe(response => {\n      return response;\n    });\n  }\n};\nPanierComponent = __decorate([Component({\n  selector: 'panier',\n  templateUrl: './panier.component.html',\n  styleUrls: ['./panier.component.css']\n})], PanierComponent);\nexport { PanierComponent };","map":{"version":3,"names":["Component","PanierComponent","constructor","basketService","Total","SubTotal","DisCountSales","TotalSalesTax","ngOnInit","getBasket","subscribe","response","Baskets","Products","Object","values","forEach","element","price","increase","Product","quantite","product","stock","UpdateBasket","decrease","ngClearBasket","clearBasket","ngDeleteItemFromBasket","item","deleteItemFromBasket","filter","t","id","Basket","UpdateItemInBaskets","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\Workspace\\Basics\\Angular\\Point Of Sale\\PointOfSale\\src\\app\\Components\\Components\\panier\\panier.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Products } from 'src/app/Modules/Model/Products';\r\nimport { basket as Basket, basket } from 'src/app/Modules/Model/basket';\r\nimport { BasketService } from 'src/app/Services/Basket/basket.service';\r\n\r\n@Component({\r\n  selector: 'panier',\r\n  templateUrl: './panier.component.html',\r\n  styleUrls: ['./panier.component.css']\r\n})\r\n\r\nexport class PanierComponent implements OnInit  {\r\n  Products: any[];\r\n  Baskets: Basket[];\r\n  Total: number = 0;\r\n  SubTotal: number = 0;\r\n  DisCountSales: number = 50;\r\n  TotalSalesTax: number = 20;\r\n\r\n  constructor(private basketService: BasketService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.basketService.getBasket().subscribe(\r\n      (response) => {\r\n        this.Baskets = response;\r\n        this.Products = Object.values(response);\r\n        this.Products.forEach(element => {\r\n          this.SubTotal += element.price\r\n        });\r\n        if(this.SubTotal == 0)\r\n        {\r\n          this.Total = 0;\r\n          return;\r\n        }\r\n        this.Total = this.SubTotal - 30;\r\n      }\r\n    )\r\n  }\r\n\r\n  increase(Product: Basket): void {\r\n    if(Product.quantite >= Product.product.stock)\r\n    {\r\n      return;\r\n    }\r\n    else {\r\n      this.SubTotal = this.SubTotal - Product.price\r\n      this.Total = this.SubTotal - 30;\r\n      Product.quantite++;\r\n      Product.price = Product.product.price * Product.quantite;\r\n      this.UpdateBasket(Product);\r\n    }\r\n    this.SubTotal += Product.price\r\n    this.Total = this.SubTotal - 30;\r\n  }\r\n\r\n  decrease(Product: Basket): void {\r\n    if(Product.quantite < 2)\r\n    {\r\n      return;\r\n    }\r\n    else {\r\n      this.SubTotal = this.SubTotal - Product.price\r\n      this.Total = this.SubTotal - 30;\r\n      Product.quantite--;\r\n      Product.price = Product.product.price * Product.quantite;\r\n      this.UpdateBasket(Product);\r\n    }\r\n    this.SubTotal += Product.price\r\n    this.Total = this.SubTotal - 30;\r\n  }\r\n\r\n  ngClearBasket(): void {\r\n    this.basketService.clearBasket();\r\n    this.Baskets = [];\r\n    this.Total = 0;\r\n    this.SubTotal = 0;\r\n  }\r\n\r\n  ngDeleteItemFromBasket(item: basket): void {\r\n    this.basketService.deleteItemFromBasket(item).subscribe(() => {\r\n      this.Baskets =  this.Baskets.filter(t => t.id != item.id)\r\n    })\r\n    this.SubTotal -= item.price;\r\n    if(this.SubTotal == 0)\r\n    {\r\n      this.Total = 0;\r\n      return;\r\n    }\r\n    this.Total = this.SubTotal - 30;\r\n  }\r\n\r\n  UpdateBasket(Basket: Basket): void {\r\n    this.basketService.UpdateItemInBaskets(Basket).subscribe(\r\n      (response) => {\r\n        return response;\r\n      }\r\n    )\r\n  }\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAWjD,IAAaC,eAAe,GAA5B,MAAaA,eAAe;EAQ1BC,YAAoBC,aAA4B;IAA5B,KAAAA,aAAa,GAAbA,aAAa;IALjC,KAAAC,KAAK,GAAW,CAAC;IACjB,KAAAC,QAAQ,GAAW,CAAC;IACpB,KAAAC,aAAa,GAAW,EAAE;IAC1B,KAAAC,aAAa,GAAW,EAAE;EAEyB;EAEnDC,QAAQA,CAAA;IACN,IAAI,CAACL,aAAa,CAACM,SAAS,EAAE,CAACC,SAAS,CACrCC,QAAQ,IAAI;MACX,IAAI,CAACC,OAAO,GAAGD,QAAQ;MACvB,IAAI,CAACE,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAACJ,QAAQ,CAAC;MACvC,IAAI,CAACE,QAAQ,CAACG,OAAO,CAACC,OAAO,IAAG;QAC9B,IAAI,CAACZ,QAAQ,IAAIY,OAAO,CAACC,KAAK;MAChC,CAAC,CAAC;MACF,IAAG,IAAI,CAACb,QAAQ,IAAI,CAAC,EACrB;QACE,IAAI,CAACD,KAAK,GAAG,CAAC;QACd;;MAEF,IAAI,CAACA,KAAK,GAAG,IAAI,CAACC,QAAQ,GAAG,EAAE;IACjC,CAAC,CACF;EACH;EAEAc,QAAQA,CAACC,OAAe;IACtB,IAAGA,OAAO,CAACC,QAAQ,IAAID,OAAO,CAACE,OAAO,CAACC,KAAK,EAC5C;MACE;KACD,MACI;MACH,IAAI,CAAClB,QAAQ,GAAG,IAAI,CAACA,QAAQ,GAAGe,OAAO,CAACF,KAAK;MAC7C,IAAI,CAACd,KAAK,GAAG,IAAI,CAACC,QAAQ,GAAG,EAAE;MAC/Be,OAAO,CAACC,QAAQ,EAAE;MAClBD,OAAO,CAACF,KAAK,GAAGE,OAAO,CAACE,OAAO,CAACJ,KAAK,GAAGE,OAAO,CAACC,QAAQ;MACxD,IAAI,CAACG,YAAY,CAACJ,OAAO,CAAC;;IAE5B,IAAI,CAACf,QAAQ,IAAIe,OAAO,CAACF,KAAK;IAC9B,IAAI,CAACd,KAAK,GAAG,IAAI,CAACC,QAAQ,GAAG,EAAE;EACjC;EAEAoB,QAAQA,CAACL,OAAe;IACtB,IAAGA,OAAO,CAACC,QAAQ,GAAG,CAAC,EACvB;MACE;KACD,MACI;MACH,IAAI,CAAChB,QAAQ,GAAG,IAAI,CAACA,QAAQ,GAAGe,OAAO,CAACF,KAAK;MAC7C,IAAI,CAACd,KAAK,GAAG,IAAI,CAACC,QAAQ,GAAG,EAAE;MAC/Be,OAAO,CAACC,QAAQ,EAAE;MAClBD,OAAO,CAACF,KAAK,GAAGE,OAAO,CAACE,OAAO,CAACJ,KAAK,GAAGE,OAAO,CAACC,QAAQ;MACxD,IAAI,CAACG,YAAY,CAACJ,OAAO,CAAC;;IAE5B,IAAI,CAACf,QAAQ,IAAIe,OAAO,CAACF,KAAK;IAC9B,IAAI,CAACd,KAAK,GAAG,IAAI,CAACC,QAAQ,GAAG,EAAE;EACjC;EAEAqB,aAAaA,CAAA;IACX,IAAI,CAACvB,aAAa,CAACwB,WAAW,EAAE;IAChC,IAAI,CAACf,OAAO,GAAG,EAAE;IACjB,IAAI,CAACR,KAAK,GAAG,CAAC;IACd,IAAI,CAACC,QAAQ,GAAG,CAAC;EACnB;EAEAuB,sBAAsBA,CAACC,IAAY;IACjC,IAAI,CAAC1B,aAAa,CAAC2B,oBAAoB,CAACD,IAAI,CAAC,CAACnB,SAAS,CAAC,MAAK;MAC3D,IAAI,CAACE,OAAO,GAAI,IAAI,CAACA,OAAO,CAACmB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,IAAIJ,IAAI,CAACI,EAAE,CAAC;IAC3D,CAAC,CAAC;IACF,IAAI,CAAC5B,QAAQ,IAAIwB,IAAI,CAACX,KAAK;IAC3B,IAAG,IAAI,CAACb,QAAQ,IAAI,CAAC,EACrB;MACE,IAAI,CAACD,KAAK,GAAG,CAAC;MACd;;IAEF,IAAI,CAACA,KAAK,GAAG,IAAI,CAACC,QAAQ,GAAG,EAAE;EACjC;EAEAmB,YAAYA,CAACU,MAAc;IACzB,IAAI,CAAC/B,aAAa,CAACgC,mBAAmB,CAACD,MAAM,CAAC,CAACxB,SAAS,CACrDC,QAAQ,IAAI;MACX,OAAOA,QAAQ;IACjB,CAAC,CACF;EACH;CACD;AAvFYV,eAAe,GAAAmC,UAAA,EAN3BpC,SAAS,CAAC;EACTqC,QAAQ,EAAE,QAAQ;EAClBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,C,EAEWtC,eAAe,CAuF3B;SAvFYA,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}