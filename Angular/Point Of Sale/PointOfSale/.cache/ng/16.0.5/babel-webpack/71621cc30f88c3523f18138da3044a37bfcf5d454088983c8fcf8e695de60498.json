{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { ApiBasket } from 'src/app/Modules/Config/Api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../Auth/auth.service\";\nconst httpOptions = {\n  headers: new HttpHeaders({\n    'Content-Type': 'application/json'\n  })\n};\nclass BasketService {\n  constructor(HttpClient, AuthService) {\n    this.HttpClient = HttpClient;\n    this.AuthService = AuthService;\n    this.id = Math.floor(Math.random() * 100000);\n    var date = new Date();\n    this.dateOfToday = date.toISOString().split('T')[0];\n  }\n  ngOnInit() {\n    this.AuthService.User().subscribe(Response => {\n      let res = Object.entries(Response);\n      this.User = {\n        id: res[0][1].id,\n        name: res[0][1].name,\n        gender: res[0][1].gender,\n        email: res[0][1].email,\n        password: res[0][1].password,\n        active: res[0][1].active,\n        Key: res[0][1].Key\n      };\n    });\n  }\n  getBasket() {\n    console.log(this.User.id);\n    return this.HttpClient.get(ApiBasket, httpOptions);\n  }\n  setProductToBasket(Product, User) {\n    this.Basket = {\n      id: this.id,\n      product: Product,\n      date: this.dateOfToday,\n      user: User,\n      quantite: 1\n    };\n    return this.HttpClient.post(ApiBasket, this.Basket, httpOptions);\n  }\n}\nBasketService.ɵfac = function BasketService_Factory(t) {\n  return new (t || BasketService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthService));\n};\nBasketService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BasketService,\n  factory: BasketService.ɵfac,\n  providedIn: 'root'\n});\nexport { BasketService };","map":{"version":3,"names":["HttpHeaders","ApiBasket","httpOptions","headers","BasketService","constructor","HttpClient","AuthService","id","Math","floor","random","date","Date","dateOfToday","toISOString","split","ngOnInit","User","subscribe","Response","res","Object","entries","name","gender","email","password","active","Key","getBasket","console","log","get","setProductToBasket","Product","Basket","product","user","quantite","post","i0","ɵɵinject","i1","i2","factory","ɵfac","providedIn"],"sources":["C:\\WorkSpace\\Basics\\Angular\\Point Of Sale\\PointOfSale\\src\\app\\Services\\Basket\\basket.service.ts"],"sourcesContent":["import { Injectable, OnInit } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { ApiBasket } from 'src/app/Modules/Config/Api';\r\nimport { basket } from 'src/app/Modules/Model/basket';\r\nimport { Products } from 'src/app/Modules/Model/Products';\r\nimport { User } from 'src/app/Modules/Model/Users';\r\nimport { AuthService } from '../Auth/auth.service';\r\n\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({\r\n    'Content-Type': 'application/json',\r\n  })\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class BasketService implements OnInit {\r\n  Basket: basket;\r\n  dateOfToday: any;\r\n  id: number = Math.floor(Math.random() * 100000);\r\n  User: User\r\n\r\n  constructor(private HttpClient: HttpClient, private AuthService: AuthService) { \r\n    var date = new Date();\r\n    this.dateOfToday = date.toISOString().split('T')[0];\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.AuthService.User().subscribe(\r\n      (Response) => {\r\n        let res = Object.entries(Response);\r\n        this.User = { \r\n          id: res[0][1].id,\r\n          name:  res[0][1].name,\r\n          gender:  res[0][1].gender,\r\n          email:  res[0][1].email,\r\n          password:  res[0][1].password,\r\n          active:  res[0][1].active,\r\n          Key:  res[0][1].Key,\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  getBasket(): Observable<basket[]> {\r\n    console.log(this.User.id);\r\n    return this.HttpClient.get<basket[]>(ApiBasket , httpOptions);\r\n  }\r\n\r\n  setProductToBasket(Product: Products, User: User): Observable<basket> {\r\n    this.Basket = {\r\n      id: this.id,\r\n      product: Product,\r\n      date: this.dateOfToday,\r\n      user: User,\r\n      quantite: 1\r\n    }\r\n    return this.HttpClient.post<basket>(ApiBasket, this.Basket, httpOptions);\r\n  }\r\n\r\n}\r\n"],"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;AAE9D,SAASC,SAAS,QAAQ,4BAA4B;;;;AAMtD,MAAMC,WAAW,GAAG;EAClBC,OAAO,EAAE,IAAIH,WAAW,CAAC;IACvB,cAAc,EAAE;GACjB;CACF;AAED,MAIaI,aAAa;EAMxBC,YAAoBC,UAAsB,EAAUC,WAAwB;IAAxD,KAAAD,UAAU,GAAVA,UAAU;IAAsB,KAAAC,WAAW,GAAXA,WAAW;IAH/D,KAAAC,EAAE,GAAWC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,MAAM,CAAC;IAI7C,IAAIC,IAAI,GAAG,IAAIC,IAAI,EAAE;IACrB,IAAI,CAACC,WAAW,GAAGF,IAAI,CAACG,WAAW,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrD;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACV,WAAW,CAACW,IAAI,EAAE,CAACC,SAAS,CAC9BC,QAAQ,IAAI;MACX,IAAIC,GAAG,GAAGC,MAAM,CAACC,OAAO,CAACH,QAAQ,CAAC;MAClC,IAAI,CAACF,IAAI,GAAG;QACVV,EAAE,EAAEa,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACb,EAAE;QAChBgB,IAAI,EAAGH,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,IAAI;QACrBC,MAAM,EAAGJ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACI,MAAM;QACzBC,KAAK,EAAGL,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;QACvBC,QAAQ,EAAGN,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACM,QAAQ;QAC7BC,MAAM,EAAGP,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACO,MAAM;QACzBC,GAAG,EAAGR,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACQ;OACjB;IACH,CAAC,CACF;EACH;EAEAC,SAASA,CAAA;IACPC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACd,IAAI,CAACV,EAAE,CAAC;IACzB,OAAO,IAAI,CAACF,UAAU,CAAC2B,GAAG,CAAWhC,SAAS,EAAGC,WAAW,CAAC;EAC/D;EAEAgC,kBAAkBA,CAACC,OAAiB,EAAEjB,IAAU;IAC9C,IAAI,CAACkB,MAAM,GAAG;MACZ5B,EAAE,EAAE,IAAI,CAACA,EAAE;MACX6B,OAAO,EAAEF,OAAO;MAChBvB,IAAI,EAAE,IAAI,CAACE,WAAW;MACtBwB,IAAI,EAAEpB,IAAI;MACVqB,QAAQ,EAAE;KACX;IACD,OAAO,IAAI,CAACjC,UAAU,CAACkC,IAAI,CAASvC,SAAS,EAAE,IAAI,CAACmC,MAAM,EAAElC,WAAW,CAAC;EAC1E;;AA1CWE,aAAa,C;mBAAbA,aAAa,EAAAqC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAArC,UAAA,GAAAmC,EAAA,CAAAC,QAAA,CAAAE,EAAA,CAAArC,WAAA;AAAA;AAAbH,aAAa,C;SAAbA,aAAa;EAAAyC,OAAA,EAAbzC,aAAa,CAAA0C,IAAA;EAAAC,UAAA,EAHZ;AAAM;SAGP3C,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}