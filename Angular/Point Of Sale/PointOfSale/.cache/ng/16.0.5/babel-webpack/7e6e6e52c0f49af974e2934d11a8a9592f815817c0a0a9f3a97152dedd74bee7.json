{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Response } from 'src/app/Modules/Error/Response';\nimport { EMAIL_CODE_VEREFICATION } from 'src/app/Modules/Config/Config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/Services/Auth/auth.service\";\nimport * as i3 from \"src/app/Services/Email/email.service\";\nimport * as i4 from \"src/app/Services/Carousel/owl.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../Components/error/error.component\";\nfunction EmailComponent_error_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"error\", 17);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"message\", ctx_r0.message);\n  }\n}\nclass EmailComponent {\n  constructor(formBuilder, AuthService, MailService, Owl, Router, ActivateRoute) {\n    this.formBuilder = formBuilder;\n    this.AuthService = AuthService;\n    this.MailService = MailService;\n    this.Owl = Owl;\n    this.Router = Router;\n    this.ActivateRoute = ActivateRoute;\n    this.error = true;\n    this.Validators = this.formBuilder.group({\n      email: this.formBuilder.control('', [Validators.email])\n    });\n  }\n  ngOnInit() {\n    if (this.AuthService.Check()) {\n      this.Router.navigate(['/']);\n    }\n    this.Owl.owl();\n    this.email = this.ActivateRoute.snapshot.params['email'];\n    this.AuthService.ForgotPassword(this.email).subscribe(response => {\n      if (Object.keys(response).length > 0) {\n        this.User = response;\n      } else {\n        this.Router.navigate(['/auth/login']);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  ngOnSubmit() {\n    if (this.Validators.value.email == \"\" || this.Validators.value.email == null) {\n      this.ThrowError(Response.RESPONSE_MSG_VAILDATION_EMPTY);\n    } else {\n      if (this.Validators.controls.email.errors) {\n        this.ThrowError(Response.RESPONSE_MSG_VAILDATION_EMAIL);\n      } else {\n        var mail = this.Validators.value.email;\n        this.MailService.sendEmail(mail, EMAIL_CODE_VEREFICATION.toString(), this.name);\n        this.Router.navigate([`/auth/forget-password/email-confirm/${this.email}`]);\n      }\n    }\n  }\n  ThrowError(Msg) {\n    this.message = Msg;\n  }\n}\nEmailComponent.ɵfac = function EmailComponent_Factory(t) {\n  return new (t || EmailComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.EmailService), i0.ɵɵdirectiveInject(i4.OwlService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i5.ActivatedRoute));\n};\nEmailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EmailComponent,\n  selectors: [[\"app-email\"]],\n  decls: 27,\n  vars: 2,\n  consts: [[1, \"authentification\", \"d-flex-center\"], [1, \"container\"], [1, \"authentification-content\", \"shadow\"], [1, \"auth-section\", \"d-none\"], [1, \"auth-section\", \"authentification-form\"], [1, \"app-logo\"], [1, \"icon-key\"], [1, \"block-text\"], [1, \"auth-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"input-floating\"], [\"type\", \"text\", \"formControlName\", \"email\", \"required\", \"\"], [1, \"icon-email\"], [3, \"message\", 4, \"ngIf\"], [1, \"btn\"], [\"routerLink\", \"/auth/login\", 1, \"d-flex\"], [1, \"icon\", \"icon-arrow-left\", \"text-primary\"], [1, \"link\", \"text-primary\"], [3, \"message\"]],\n  template: function EmailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵelement(3, \"section\", 3);\n      i0.ɵɵelementStart(4, \"section\", 4)(5, \"div\", 5);\n      i0.ɵɵelement(6, \"i\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 7)(8, \"h2\");\n      i0.ɵɵtext(9, \" Forgot Password! \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"p\");\n      i0.ɵɵtext(11, \" No worries, we'll send you rest instructions in this mail, \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"form\", 8);\n      i0.ɵɵlistener(\"ngSubmit\", function EmailComponent_Template_form_ngSubmit_12_listener() {\n        return ctx.ngOnSubmit();\n      });\n      i0.ɵɵelementStart(13, \"div\", 9);\n      i0.ɵɵelement(14, \"input\", 10);\n      i0.ɵɵelementStart(15, \"span\");\n      i0.ɵɵtext(16, \" E-mail \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"i\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"p\");\n      i0.ɵɵtemplate(19, EmailComponent_error_19_Template, 1, 1, \"error\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"button\", 13);\n      i0.ɵɵtext(21, \" Reset Password \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 7)(23, \"div\", 14);\n      i0.ɵɵelement(24, \"i\", 15);\n      i0.ɵɵelementStart(25, \"a\", 16);\n      i0.ɵɵtext(26, \" Back to log in \");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"formGroup\", ctx.Validators);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n    }\n  },\n  dependencies: [i6.NgIf, i5.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i7.ErrorComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { EmailComponent };","map":{"version":3,"names":["Validators","Response","EMAIL_CODE_VEREFICATION","i0","ɵɵelement","ɵɵpropertyInterpolate","ctx_r0","message","EmailComponent","constructor","formBuilder","AuthService","MailService","Owl","Router","ActivateRoute","error","group","email","control","ngOnInit","Check","navigate","owl","snapshot","params","ForgotPassword","subscribe","response","Object","keys","length","User","console","log","ngOnSubmit","value","ThrowError","RESPONSE_MSG_VAILDATION_EMPTY","controls","errors","RESPONSE_MSG_VAILDATION_EMAIL","mail","sendEmail","toString","name","Msg","ɵɵdirectiveInject","i1","FormBuilder","i2","i3","EmailService","i4","OwlService","i5","ActivatedRoute","selectors","decls","vars","consts","template","EmailComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelementEnd","ɵɵtext","ɵɵlistener","EmailComponent_Template_form_ngSubmit_12_listener","ɵɵtemplate","EmailComponent_error_19_Template","ɵɵadvance","ɵɵproperty"],"sources":["E:\\Workspace\\Basics\\Angular\\Point Of Sale\\PointOfSale\\src\\app\\Views\\Auth\\password\\email\\email.component.ts","E:\\Workspace\\Basics\\Angular\\Point Of Sale\\PointOfSale\\src\\app\\Views\\Auth\\password\\email\\email.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from 'src/app/Services/Auth/auth.service';\r\nimport { FormBuilder, Validators } from '@angular/forms'\r\nimport { Router, ActivatedRoute  } from '@angular/router';\r\nimport { OwlService } from 'src/app/Services/Carousel/owl.service';\r\nimport { Response  } from 'src/app/Modules/Error/Response';\r\nimport { EmailService } from 'src/app/Services/Email/email.service';\r\nimport { EMAIL_CODE_VEREFICATION } from 'src/app/Modules/Config/Config';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { ToastService } from 'src/app/Services/Toast/toast.service';\r\nimport { User } from 'src/app/Modules/Model/Users';\r\n\r\n@Component({\r\n  selector: 'app-email',\r\n  templateUrl: './email.component.html',\r\n  styleUrls: ['./email.component.css']\r\n})\r\nexport class EmailComponent implements OnInit {\r\n  error: boolean = true;\r\n  message: string;\r\n  email: string;\r\n  name: string;\r\n  User: User;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private AuthService: AuthService,\r\n    private MailService: EmailService,\r\n    private Owl: OwlService,\r\n    private Router: Router,\r\n    private ActivateRoute: ActivatedRoute\r\n  ) {  }\r\n\r\n  ngOnInit(): void {\r\n    if(this.AuthService.Check())\r\n    {\r\n      this.Router.navigate(['/']);\r\n    }\r\n    this.Owl.owl();\r\n\r\n    this.email = this.ActivateRoute.snapshot.params['email'];\r\n\r\n    this.AuthService.ForgotPassword(this.email).subscribe(\r\n      response => {\r\n        if(Object.keys(response).length > 0)\r\n        {\r\n          this.User = response;\r\n        } else {\r\n          this.Router.navigate(['/auth/login']);\r\n        }\r\n      },\r\n      (error: HttpErrorResponse) => {\r\n       console.log(error);\r\n      }\r\n    )\r\n  }\r\n\r\n  Validators = this.formBuilder.group({\r\n    email: this.formBuilder.control('', [Validators.email])\r\n  });\r\n\r\n  ngOnSubmit(): void {\r\n    if(this.Validators.value.email == \"\" || this.Validators.value.email == null)\r\n    {\r\n      this.ThrowError(Response.RESPONSE_MSG_VAILDATION_EMPTY);\r\n    }\r\n    else {\r\n      if(this.Validators.controls.email.errors) {\r\n        this.ThrowError(Response.RESPONSE_MSG_VAILDATION_EMAIL);\r\n      }\r\n      else {\r\n        var mail: string = this.Validators.value.email;\r\n        this.MailService.sendEmail(mail, EMAIL_CODE_VEREFICATION.toString(), this.name);\r\n        this.Router.navigate([`/auth/forget-password/email-confirm/${this.email}`]);\r\n      }\r\n    }\r\n  }\r\n\r\n  ThrowError(Msg: string): void {\r\n    this.message = Msg;\r\n  }\r\n}\r\n","<section class=\"authentification d-flex-center\">\r\n    <div class=\"container\">\r\n        <div class=\"authentification-content shadow\">\r\n            <section class=\"auth-section d-none\">\r\n            </section>\r\n            <section class=\"auth-section authentification-form\">\r\n                <div class=\"app-logo\">\r\n                    <i class=\"icon-key\"></i>\r\n                </div>\r\n                <div class=\"block-text\">\r\n                    <h2> Forgot Password! </h2>\r\n                    <p>\r\n                        No worries, we'll send you rest instructions in this mail,\r\n                    </p>\r\n                </div>\r\n                <form class=\"auth-form\" [formGroup]=\"Validators\" (ngSubmit)=\"ngOnSubmit()\">\r\n                    <div class=\"input-floating\">\r\n                        <input type=\"text\" formControlName=\"email\" required/>\r\n                        <span> E-mail </span>\r\n                        <i class=\"icon-email\"></i>\r\n                    </div>\r\n                    <p>\r\n                        <error *ngIf=\"error\" message=\"{{ message }}\"></error>\r\n                    </p>\r\n                    <button class=\"btn\">\r\n                        Reset Password\r\n                    </button>\r\n                </form>\r\n                <div class=\"block-text\">\r\n                    <div class=\"d-flex\" routerLink=\"/auth/login\">\r\n                        <i class=\"icon icon-arrow-left text-primary\"></i>\r\n                        <a class=\"link text-primary\"> Back to log in </a>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</section>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}