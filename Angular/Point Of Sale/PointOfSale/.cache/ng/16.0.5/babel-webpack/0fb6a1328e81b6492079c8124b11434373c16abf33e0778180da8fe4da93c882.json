{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet PanierComponent = class PanierComponent {\n  constructor(basketService) {\n    this.basketService = basketService;\n    this.Total = 0;\n    this.SubTotal = 0;\n    this.DisCountSales = 50;\n    this.TotalSalesTax = 20;\n  }\n  ngOnInit() {\n    this.basketService.getBasket().subscribe(response => {\n      this.Baskets = response;\n      this.Products = Object.values(response);\n      if (this.Products.length <= 0) {\n        return;\n      }\n      this.Products.forEach(element => {\n        this.Total += element.product.price;\n      });\n      this.SubTotal = this.Total;\n      this.Total += this.TotalSalesTax - this.DisCountSales;\n    });\n  }\n  ngOnChanges(changes) {\n    if (changes) {\n      console.log(changes);\n    }\n  }\n  increase(Product) {\n    if (Product.quantite >= Product.product.stock) {\n      Product.quantite = Product.product.stock;\n    } else {\n      Product.quantite++;\n      Product.price = Product.quantite * Product.product.price;\n    }\n  }\n  decrease(Product) {\n    if (Product.quantite < 2) {\n      Product.quantite = 1;\n    } else {\n      Product.quantite--;\n      Product.price -= Product.product.price;\n    }\n  }\n  ngClearBasket() {\n    this.basketService.clearBasket();\n  }\n  ngDeleteItemFromBasket(item) {\n    this.basketService.deleteItemFromBasket(item).subscribe(() => {\n      this.Baskets = this.Baskets.filter(t => t.id != item.id);\n      window.location.reload();\n    });\n  }\n};\nPanierComponent = __decorate([Component({\n  selector: 'panier',\n  templateUrl: './panier.component.html',\n  styleUrls: ['./panier.component.css']\n})], PanierComponent);\nexport { PanierComponent };","map":{"version":3,"names":["Component","PanierComponent","constructor","basketService","Total","SubTotal","DisCountSales","TotalSalesTax","ngOnInit","getBasket","subscribe","response","Baskets","Products","Object","values","length","forEach","element","product","price","ngOnChanges","changes","console","log","increase","Product","quantite","stock","decrease","ngClearBasket","clearBasket","ngDeleteItemFromBasket","item","deleteItemFromBasket","filter","t","id","window","location","reload","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\WorkSpace\\Basics\\Angular\\Point Of Sale\\PointOfSale\\src\\app\\Components\\Components\\panier\\panier.component.ts"],"sourcesContent":["import { Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { basket } from 'src/app/Modules/Model/basket';\r\nimport { BasketService } from 'src/app/Services/Basket/basket.service';\r\n\r\n@Component({\r\n  selector: 'panier',\r\n  templateUrl: './panier.component.html',\r\n  styleUrls: ['./panier.component.css']\r\n})\r\nexport class PanierComponent implements OnInit, OnChanges  {\r\n  Products: any[];\r\n  Baskets: basket[];\r\n  Total: number = 0;\r\n  SubTotal: number = 0;\r\n  DisCountSales: number = 50;\r\n  TotalSalesTax: number = 20;\r\n\r\n  constructor(private basketService: BasketService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.basketService.getBasket().subscribe(\r\n      (response) => {\r\n        this.Baskets = response;\r\n        this.Products = Object.values(response);\r\n        if(this.Products.length <= 0)\r\n        {\r\n          return;\r\n        }\r\n        this.Products.forEach(element => {\r\n          this.Total += element.product.price;\r\n        });\r\n        this.SubTotal = this.Total;\r\n        this.Total += this.TotalSalesTax - this.DisCountSales;\r\n      }\r\n    )\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if(changes) {\r\n      console.log(changes);\r\n    }\r\n  }\r\n\r\n  increase(Product: basket): void {\r\n    if(Product.quantite >= Product.product.stock) {\r\n      Product.quantite = Product.product.stock;\r\n    }\r\n    else {\r\n      Product.quantite++;\r\n      Product.price = Product.quantite * Product.product.price;\r\n    }\r\n  }\r\n\r\n  decrease(Product: basket): void {\r\n    if(Product.quantite < 2) {\r\n      Product.quantite = 1;\r\n    }\r\n    else {\r\n      Product.quantite--;\r\n      Product.price -= Product.product.price;\r\n    } \r\n  }\r\n\r\n  ngClearBasket(): void {\r\n    this.basketService.clearBasket();\r\n  }\r\n\r\n  ngDeleteItemFromBasket(item: basket): void {\r\n    this.basketService.deleteItemFromBasket(item).subscribe(() => {\r\n      this.Baskets =  this.Baskets.filter(t => t.id != item.id)\r\n      window.location.reload();\r\n    })\r\n  }\r\n\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,QAA0C,eAAe;AAS3E,IAAaC,eAAe,GAA5B,MAAaA,eAAe;EAQ1BC,YAAoBC,aAA4B;IAA5B,KAAAA,aAAa,GAAbA,aAAa;IALjC,KAAAC,KAAK,GAAW,CAAC;IACjB,KAAAC,QAAQ,GAAW,CAAC;IACpB,KAAAC,aAAa,GAAW,EAAE;IAC1B,KAAAC,aAAa,GAAW,EAAE;EAEyB;EAEnDC,QAAQA,CAAA;IACN,IAAI,CAACL,aAAa,CAACM,SAAS,EAAE,CAACC,SAAS,CACrCC,QAAQ,IAAI;MACX,IAAI,CAACC,OAAO,GAAGD,QAAQ;MACvB,IAAI,CAACE,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAACJ,QAAQ,CAAC;MACvC,IAAG,IAAI,CAACE,QAAQ,CAACG,MAAM,IAAI,CAAC,EAC5B;QACE;;MAEF,IAAI,CAACH,QAAQ,CAACI,OAAO,CAACC,OAAO,IAAG;QAC9B,IAAI,CAACd,KAAK,IAAIc,OAAO,CAACC,OAAO,CAACC,KAAK;MACrC,CAAC,CAAC;MACF,IAAI,CAACf,QAAQ,GAAG,IAAI,CAACD,KAAK;MAC1B,IAAI,CAACA,KAAK,IAAI,IAAI,CAACG,aAAa,GAAG,IAAI,CAACD,aAAa;IACvD,CAAC,CACF;EACH;EAEAe,WAAWA,CAACC,OAAsB;IAChC,IAAGA,OAAO,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;;EAExB;EAEAG,QAAQA,CAACC,OAAe;IACtB,IAAGA,OAAO,CAACC,QAAQ,IAAID,OAAO,CAACP,OAAO,CAACS,KAAK,EAAE;MAC5CF,OAAO,CAACC,QAAQ,GAAGD,OAAO,CAACP,OAAO,CAACS,KAAK;KACzC,MACI;MACHF,OAAO,CAACC,QAAQ,EAAE;MAClBD,OAAO,CAACN,KAAK,GAAGM,OAAO,CAACC,QAAQ,GAAGD,OAAO,CAACP,OAAO,CAACC,KAAK;;EAE5D;EAEAS,QAAQA,CAACH,OAAe;IACtB,IAAGA,OAAO,CAACC,QAAQ,GAAG,CAAC,EAAE;MACvBD,OAAO,CAACC,QAAQ,GAAG,CAAC;KACrB,MACI;MACHD,OAAO,CAACC,QAAQ,EAAE;MAClBD,OAAO,CAACN,KAAK,IAAIM,OAAO,CAACP,OAAO,CAACC,KAAK;;EAE1C;EAEAU,aAAaA,CAAA;IACX,IAAI,CAAC3B,aAAa,CAAC4B,WAAW,EAAE;EAClC;EAEAC,sBAAsBA,CAACC,IAAY;IACjC,IAAI,CAAC9B,aAAa,CAAC+B,oBAAoB,CAACD,IAAI,CAAC,CAACvB,SAAS,CAAC,MAAK;MAC3D,IAAI,CAACE,OAAO,GAAI,IAAI,CAACA,OAAO,CAACuB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,IAAIJ,IAAI,CAACI,EAAE,CAAC;MACzDC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IAC1B,CAAC,CAAC;EACJ;CAED;AAjEYvC,eAAe,GAAAwC,UAAA,EAL3BzC,SAAS,CAAC;EACT0C,QAAQ,EAAE,QAAQ;EAClBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,C,EACW3C,eAAe,CAiE3B;SAjEYA,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}